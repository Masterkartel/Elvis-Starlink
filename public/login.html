<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EcoCash â€” Login</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  *{box-sizing:border-box}
  html,body{height:100%}

  body{
    font-family:Inter,system-ui,Arial,sans-serif;
    background:linear-gradient(180deg,#f7fbff,#e8f3ff);
    margin:0;
    padding:18px;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .card{
    width:100%;
    max-width:380px;
    background:#fff;
    padding:20px;
    border-radius:14px;
    box-shadow:0 12px 30px rgba(2,6,23,0.08);
  }

  .logo{
    height:44px;
    display:block;
    margin:0 auto 10px;
  }

  h2{
    text-align:center;
    margin:0 0 12px;
    font-size:20px;
    color:#111;
  }

  label{
    display:block;
    font-size:13px;
    color:#374151;
    margin-top:10px;
  }

  .req{
    color:#dc2626; /* ðŸ”´ red required star */
    margin-right:6px;
    font-weight:600;
  }

  input{
    width:100%;
    padding:10px;
    margin-top:4px;
    border-radius:8px;
    border:1px solid #e6eefc;
    background:#fbfdff;
    font-size:14px;
  }

  input:focus{
    outline:none;
    border-color:#4b86ff;
  }

  .btn{
    width:100%;
    margin-top:14px;
    padding:11px;
    border-radius:8px;
    border:0;
    background:#4b86ff;
    color:#fff;
    font-size:14px;
    font-weight:600;
    cursor:pointer;
  }

  .btn[disabled]{
    background:#cbd5e1;
    color:#6b7280;
    cursor:not-allowed;
  }

  /* OTP MODAL */
  .otp-modal{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,0.4);
    z-index:9999;
  }

  .otp-box{
    background:#fff;
    padding:18px;
    border-radius:14px;
    width:100%;
    max-width:320px;
    box-shadow:0 12px 24px rgba(2,6,23,0.15);
  }

  .otp-row{
    display:flex;
    gap:8px;
    justify-content:center;
    margin-top:10px;
  }

  .otp-digit{
    width:42px;
    height:48px;
    text-align:center;
    font-size:18px;
    border-radius:8px;
    border:1px solid #e6eefc;
  }

  .otp-actions{
    display:flex;
    gap:10px;
    margin-top:14px;
  }

  .btn-green{
    flex:1;
    background:#16a34a;
    color:#fff;
    border:0;
    border-radius:8px;
    padding:10px;
    cursor:pointer;
  }

  .btn-gray{
    flex:1;
    background:#e5e7eb;
    border:0;
    border-radius:8px;
    padding:10px;
    cursor:pointer;
  }
</style>
</head>

<body>

<div class="card">
  <img src="assets/eco.png" alt="EcoCash logo" class="logo">
  <h2>Log In</h2>

  <form autocomplete="off" onsubmit="return false;">
    <label><span class="req">â˜…</span>Mobile Number
      <input id="phone" value="+263" inputmode="tel" autocomplete="tel">
    </label>

    <label><span class="req">â˜…</span>4-Digit PIN
      <input id="pin" maxlength="4" placeholder="Enter 4-digit PIN" inputmode="numeric">
    </label>

    <button type="button" id="loginBtn" class="btn" disabled>LOGIN</button>
  </form>
</div>

<!-- OTP MODAL -->
<div id="otpModal" class="otp-modal" style="display:none">
  <div class="otp-box">
    <strong style="display:block;text-align:center">Enter OTP</strong>

    <div class="otp-row">
      <input class="otp-digit" maxlength="1">
      <input class="otp-digit" maxlength="1">
      <input class="otp-digit" maxlength="1">
      <input class="otp-digit" maxlength="1">
      <input class="otp-digit" maxlength="1">
      <input class="otp-digit" maxlength="1">
    </div>

    <div class="otp-actions">
      <button class="btn-green">Confirm</button>
      <button id="cancelOtp" class="btn-gray">Cancel</button>
    </div>
  </div>
</div>

<script>
  const phoneEl = document.getElementById('phone');
  const pinEl = document.getElementById('pin');
  const loginBtn = document.getElementById('loginBtn');
  const otpModal = document.getElementById('otpModal');

  const PREFIX = '+263';

  function normalizePhone(){
    let digits = phoneEl.value.slice(PREFIX.length).replace(/\D/g,'');
    if (digits.startsWith('0')) digits = digits.slice(1);
    if (digits.length && digits[0] !== '7') digits = '7' + digits.slice(1);
    phoneEl.value = PREFIX + digits.slice(0,9);
  }

  function isValidPhone(){
    const d = phoneEl.value.slice(PREFIX.length);
    return /^\d{9}$/.test(d) && d.startsWith('7');
  }

  function updateState(){
    const validPhone = isValidPhone();
    const validPin = /^\d{4}$/.test(pinEl.value);
    loginBtn.disabled = !validPhone || !validPin;
  }

  phoneEl.addEventListener('keydown', e=>{
    if((e.key === 'Backspace' || e.key === 'Delete') && phoneEl.selectionStart <= PREFIX.length){
      e.preventDefault();
    }
  });

  phoneEl.addEventListener('input', ()=>{
    if(!phoneEl.value.startsWith(PREFIX)) phoneEl.value = PREFIX;
    normalizePhone();
    updateState();
  });

  pinEl.addEventListener('input', ()=>{
    pinEl.value = pinEl.value.replace(/\D/g,'').slice(0,4);
    updateState();
  });

  loginBtn.addEventListener('click', ()=>{
    otpModal.style.display = 'flex';
  });

  document.getElementById('cancelOtp').onclick = ()=>{
    otpModal.style.display = 'none';
  };
</script>

</body>
</html>
